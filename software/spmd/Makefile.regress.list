#########################################################
# BSG Manycore Regression Suite
# 
# Format of each run:
#
# <test group>_list += '<test directory> <make target>'
#
#
# Current test groups:
#
# rv32ui
# rv32um
# rv32uf
# spmd
# coremark
# beebs
#########################################################


##########################################
# Regression groups/levels

ifndef test_case_list

  ifdef GROUP
    test_case_list = $($(GROUP)_list)
  else
    # Default is level 3 regression
    LEVEL ?= 3

    # Level 0
    test_case_list = $(rv32ui_list)

    # Level 1
    ifeq ($(shell echo $(LEVEL)\>=1 | bc),1)
      test_case_list += $(rv32um_list)
    endif

    # Level 2
    ifeq ($(shell echo $(LEVEL)\>=2 | bc),1)
      test_case_list += $(spmd_list)
    endif

    # Level 3
    ifeq ($(shell echo $(LEVEL)\>=3 | bc),1)
      test_case_list += $(coremark_list)
    endif

    # Level 4
    ifeq ($(shell echo $(LEVEL)\>=4 | bc),1)
      test_case_list += $(beebs_list)
    endif
  endif

endif



##########################################
# RISC-V 32 Assembly Tests

# The rv32-ui
rv32ui_list+='bsg_riscv_tests addi.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests add.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests andi.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests and.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests auipc.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests beq.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests bge.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests bgeu.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests blt.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests bltu.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests bne.riscv_tests_run'
#rv32ui_list+='bsg_riscv_tests fence_i.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests jalr.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests jal.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests lb.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests lbu.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests lh.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests lhu.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests lui.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests lw.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests ori.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests or.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests sb.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests sh.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests simple.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests slli.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests sll.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests slti.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests sltiu.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests slt.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests sltu.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests srai.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests sra.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests srli.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests srl.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests sub.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests sw.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests xori.riscv_tests_run'
rv32ui_list+='bsg_riscv_tests xor.riscv_tests_run'

# The rv32-um
rv32um_list+='bsg_riscv_tests div.riscv_tests_run'
rv32um_list+='bsg_riscv_tests divu.riscv_tests_run'
rv32um_list+='bsg_riscv_tests mulh.riscv_tests_run'
rv32um_list+='bsg_riscv_tests mulhsu.riscv_tests_run'
rv32um_list+='bsg_riscv_tests mulhu.riscv_tests_run'
rv32um_list+='bsg_riscv_tests mul.riscv_tests_run'
rv32um_list+='bsg_riscv_tests rem.riscv_tests_run'
rv32um_list+='bsg_riscv_tests remu.riscv_tests_run'

# The rv32-uf
rv32uf_list+='bsg_riscv_tests fadd.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests fdiv.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests fclass.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests fcmp.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests fcvt.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests fcvt_w.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests fmadd.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests fmin.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests ldst.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests move.riscv_tests_run'
rv32uf_list+='bsg_riscv_tests recoding.riscv_tests_run'

#####################################################
# SPMD tests
spmd_list+=hello
spmd_list+=bsg_token_queue
spmd_list+=bsg_fence
spmd_list+=bsg_lr_acq
spmd_list+=bsg_chained_core
spmd_list+=bsg_outbuf_full
spmd_list+=mul_div
spmd_list+=bypass_core
spmd_list+=bsg_remote_load
spmd_list+=instr_tests/jal_rv32
spmd_list+=instr_tests/branch_rv32
spmd_list+=load_dependency
spmd_list+=remote_load_crc
spmd_list+=bsg_remote_congestion
spmd_list+=bsg_tile_group_barrier
spmd_list+=bsg_mutex
spmd_list+=bsg_barrier
spmd_list+=bsg_transpose
spmd_list+=regfile_x0_test
spmd_list+=fib
spmd_list+=crc32
spmd_list+=quicksort
spmd_list+=nprimes
spmd_list+=depend_stall_mispredict
spmd_list+=striped_hello
spmd_list+=fft


#######################################################
# Benchmarks

# Coremark
coremark_list+=coremark

# Beebs
include $(BSG_MANYCORE_DIR)/software/spmd/beebs/Makefile.bmarklist
beebs_list+=$(foreach bmark, $(BMARK_LIST), 'beeps $(bmark).run')

// This test saturates the network with icache miss traffic.

#include "bsg_manycore_arch.h"
#include "bsg_manycore_asm.h"


.text
  bsg_asm_init_regfile

test_init:
  li s0, 0 // sum
  j here0

.org (4096*1)
here0:
  addi s0, s0, 0
  addi s0, s0, 1
  addi s0, s0, 2
  addi s0, s0, 3
  addi s0, s0, 4
  addi s0, s0, 5
  addi s0, s0, 6
  addi s0, s0, 7
  addi s0, s0, 8
  addi s0, s0, 9
  addi s0, s0, 10
  addi s0, s0, 11
  addi s0, s0, 12
  addi s0, s0, 13
  addi s0, s0, 14
  addi s0, s0, 15
  addi s0, s0, 16
  addi s0, s0, 17
  addi s0, s0, 18
  addi s0, s0, 19
  addi s0, s0, 20
  addi s0, s0, 21
  addi s0, s0, 22
  addi s0, s0, 23
  addi s0, s0, 24
  addi s0, s0, 25
  addi s0, s0, 26
  addi s0, s0, 27
  addi s0, s0, 28
  addi s0, s0, 29
  addi s0, s0, 30
  addi s0, s0, 31
  addi s0, s0, 32
  addi s0, s0, 33
  addi s0, s0, 34
  addi s0, s0, 35
  addi s0, s0, 36
  addi s0, s0, 37
  addi s0, s0, 38
  addi s0, s0, 39
  addi s0, s0, 40
  addi s0, s0, 41
  addi s0, s0, 42
  addi s0, s0, 43
  addi s0, s0, 44
  addi s0, s0, 45
  addi s0, s0, 46
  addi s0, s0, 47
  addi s0, s0, 48
  addi s0, s0, 49
  addi s0, s0, 50
  addi s0, s0, 51
  addi s0, s0, 52
  addi s0, s0, 53
  addi s0, s0, 54
  addi s0, s0, 55
  addi s0, s0, 56
  addi s0, s0, 57
  addi s0, s0, 58
  addi s0, s0, 59
  addi s0, s0, 60
  addi s0, s0, 61
  addi s0, s0, 62
  addi s0, s0, 63
  addi s0, s0, 64
  addi s0, s0, 65
  addi s0, s0, 66
  addi s0, s0, 67
  addi s0, s0, 68
  addi s0, s0, 69
  addi s0, s0, 70
  addi s0, s0, 71
  addi s0, s0, 72
  addi s0, s0, 73
  addi s0, s0, 74
  addi s0, s0, 75
  addi s0, s0, 76
  addi s0, s0, 77
  addi s0, s0, 78
  addi s0, s0, 79
  addi s0, s0, 80
  addi s0, s0, 81
  addi s0, s0, 82
  addi s0, s0, 83
  addi s0, s0, 84
  addi s0, s0, 85
  addi s0, s0, 86
  addi s0, s0, 87
  addi s0, s0, 88
  addi s0, s0, 89
  addi s0, s0, 90
  addi s0, s0, 91
  addi s0, s0, 92
  addi s0, s0, 93
  addi s0, s0, 94
  addi s0, s0, 95
  addi s0, s0, 96
  addi s0, s0, 97
  addi s0, s0, 98
  addi s0, s0, 99
  addi s0, s0, 100
  addi s0, s0, 101
  addi s0, s0, 102
  addi s0, s0, 103
  addi s0, s0, 104
  addi s0, s0, 105
  addi s0, s0, 106
  addi s0, s0, 107
  addi s0, s0, 108
  addi s0, s0, 109
  addi s0, s0, 110
  addi s0, s0, 111
  addi s0, s0, 112
  addi s0, s0, 113
  addi s0, s0, 114
  addi s0, s0, 115
  addi s0, s0, 116
  addi s0, s0, 117
  addi s0, s0, 118
  addi s0, s0, 119
  addi s0, s0, 120
  addi s0, s0, 121
  addi s0, s0, 122
  addi s0, s0, 123
  addi s0, s0, 124
  addi s0, s0, 125
  addi s0, s0, 126
  addi s0, s0, 127
  addi s0, s0, 128
  addi s0, s0, 129
  addi s0, s0, 130
  addi s0, s0, 131
  addi s0, s0, 132
  addi s0, s0, 133
  addi s0, s0, 134
  addi s0, s0, 135
  addi s0, s0, 136
  addi s0, s0, 137
  addi s0, s0, 138
  addi s0, s0, 139
  addi s0, s0, 140
  addi s0, s0, 141
  addi s0, s0, 142
  addi s0, s0, 143
  addi s0, s0, 144
  addi s0, s0, 145
  addi s0, s0, 146
  addi s0, s0, 147
  addi s0, s0, 148
  addi s0, s0, 149
  addi s0, s0, 150
  addi s0, s0, 151
  addi s0, s0, 152
  addi s0, s0, 153
  addi s0, s0, 154
  addi s0, s0, 155
  addi s0, s0, 156
  addi s0, s0, 157
  addi s0, s0, 158
  addi s0, s0, 159
  addi s0, s0, 160
  addi s0, s0, 161
  addi s0, s0, 162
  addi s0, s0, 163
  addi s0, s0, 164
  addi s0, s0, 165
  addi s0, s0, 166
  addi s0, s0, 167
  addi s0, s0, 168
  addi s0, s0, 169
  addi s0, s0, 170
  addi s0, s0, 171
  addi s0, s0, 172
  addi s0, s0, 173
  addi s0, s0, 174
  addi s0, s0, 175
  addi s0, s0, 176
  addi s0, s0, 177
  addi s0, s0, 178
  addi s0, s0, 179
  addi s0, s0, 180
  addi s0, s0, 181
  addi s0, s0, 182
  addi s0, s0, 183
  addi s0, s0, 184
  addi s0, s0, 185
  addi s0, s0, 186
  addi s0, s0, 187
  addi s0, s0, 188
  addi s0, s0, 189
  addi s0, s0, 190
  addi s0, s0, 191
  addi s0, s0, 192
  addi s0, s0, 193
  addi s0, s0, 194
  addi s0, s0, 195
  addi s0, s0, 196
  addi s0, s0, 197
  addi s0, s0, 198
  addi s0, s0, 199
  addi s0, s0, 200
  addi s0, s0, 201
  addi s0, s0, 202
  addi s0, s0, 203
  addi s0, s0, 204
  addi s0, s0, 205
  addi s0, s0, 206
  addi s0, s0, 207
  addi s0, s0, 208
  addi s0, s0, 209
  addi s0, s0, 210
  addi s0, s0, 211
  addi s0, s0, 212
  addi s0, s0, 213
  addi s0, s0, 214
  addi s0, s0, 215
  addi s0, s0, 216
  addi s0, s0, 217
  addi s0, s0, 218
  addi s0, s0, 219
  addi s0, s0, 220
  addi s0, s0, 221
  addi s0, s0, 222
  addi s0, s0, 223
  addi s0, s0, 224
  addi s0, s0, 225
  addi s0, s0, 226
  addi s0, s0, 227
  addi s0, s0, 228
  addi s0, s0, 229
  addi s0, s0, 230
  addi s0, s0, 231
  addi s0, s0, 232
  addi s0, s0, 233
  addi s0, s0, 234
  addi s0, s0, 235
  addi s0, s0, 236
  addi s0, s0, 237
  addi s0, s0, 238
  addi s0, s0, 239
  addi s0, s0, 240
  addi s0, s0, 241
  addi s0, s0, 242
  addi s0, s0, 243
  addi s0, s0, 244
  addi s0, s0, 245
  addi s0, s0, 246
  addi s0, s0, 247
  addi s0, s0, 248
  addi s0, s0, 249
  addi s0, s0, 250
  addi s0, s0, 251
  addi s0, s0, 252
  addi s0, s0, 253
  addi s0, s0, 254
  addi s0, s0, 255
  addi s0, s0, 256
  addi s0, s0, 257
  addi s0, s0, 258
  addi s0, s0, 259
  addi s0, s0, 260
  addi s0, s0, 261
  addi s0, s0, 262
  addi s0, s0, 263
  addi s0, s0, 264
  addi s0, s0, 265
  addi s0, s0, 266
  addi s0, s0, 267
  addi s0, s0, 268
  addi s0, s0, 269
  addi s0, s0, 270
  addi s0, s0, 271
  addi s0, s0, 272
  addi s0, s0, 273
  addi s0, s0, 274
  addi s0, s0, 275
  addi s0, s0, 276
  addi s0, s0, 277
  addi s0, s0, 278
  addi s0, s0, 279
  addi s0, s0, 280
  addi s0, s0, 281
  addi s0, s0, 282
  addi s0, s0, 283
  addi s0, s0, 284
  addi s0, s0, 285
  addi s0, s0, 286
  addi s0, s0, 287
  addi s0, s0, 288
  addi s0, s0, 289
  addi s0, s0, 290
  addi s0, s0, 291
  addi s0, s0, 292
  addi s0, s0, 293
  addi s0, s0, 294
  addi s0, s0, 295
  addi s0, s0, 296
  addi s0, s0, 297
  addi s0, s0, 298
  addi s0, s0, 299
  addi s0, s0, 300
  addi s0, s0, 301
  addi s0, s0, 302
  addi s0, s0, 303
  addi s0, s0, 304
  addi s0, s0, 305
  addi s0, s0, 306
  addi s0, s0, 307
  addi s0, s0, 308
  addi s0, s0, 309
  addi s0, s0, 310
  addi s0, s0, 311
  addi s0, s0, 312
  addi s0, s0, 313
  addi s0, s0, 314
  addi s0, s0, 315
  addi s0, s0, 316
  addi s0, s0, 317
  addi s0, s0, 318
  addi s0, s0, 319
  addi s0, s0, 320
  addi s0, s0, 321
  addi s0, s0, 322
  addi s0, s0, 323
  addi s0, s0, 324
  addi s0, s0, 325
  addi s0, s0, 326
  addi s0, s0, 327
  addi s0, s0, 328
  addi s0, s0, 329
  addi s0, s0, 330
  addi s0, s0, 331
  addi s0, s0, 332
  addi s0, s0, 333
  addi s0, s0, 334
  addi s0, s0, 335
  addi s0, s0, 336
  addi s0, s0, 337
  addi s0, s0, 338
  addi s0, s0, 339
  addi s0, s0, 340
  addi s0, s0, 341
  addi s0, s0, 342
  addi s0, s0, 343
  addi s0, s0, 344
  addi s0, s0, 345
  addi s0, s0, 346
  addi s0, s0, 347
  addi s0, s0, 348
  addi s0, s0, 349
  addi s0, s0, 350
  addi s0, s0, 351
  addi s0, s0, 352
  addi s0, s0, 353
  addi s0, s0, 354
  addi s0, s0, 355
  addi s0, s0, 356
  addi s0, s0, 357
  addi s0, s0, 358
  addi s0, s0, 359
  addi s0, s0, 360
  addi s0, s0, 361
  addi s0, s0, 362
  addi s0, s0, 363
  addi s0, s0, 364
  addi s0, s0, 365
  addi s0, s0, 366
  addi s0, s0, 367
  addi s0, s0, 368
  addi s0, s0, 369
  addi s0, s0, 370
  addi s0, s0, 371
  addi s0, s0, 372
  addi s0, s0, 373
  addi s0, s0, 374
  addi s0, s0, 375
  addi s0, s0, 376
  addi s0, s0, 377
  addi s0, s0, 378
  addi s0, s0, 379
  addi s0, s0, 380
  addi s0, s0, 381
  addi s0, s0, 382
  addi s0, s0, 383
  addi s0, s0, 384
  addi s0, s0, 385
  addi s0, s0, 386
  addi s0, s0, 387
  addi s0, s0, 388
  addi s0, s0, 389
  addi s0, s0, 390
  addi s0, s0, 391
  addi s0, s0, 392
  addi s0, s0, 393
  addi s0, s0, 394
  addi s0, s0, 395
  addi s0, s0, 396
  addi s0, s0, 397
  addi s0, s0, 398
  addi s0, s0, 399
  addi s0, s0, 400
  addi s0, s0, 401
  addi s0, s0, 402
  addi s0, s0, 403
  addi s0, s0, 404
  addi s0, s0, 405
  addi s0, s0, 406
  addi s0, s0, 407
  addi s0, s0, 408
  addi s0, s0, 409
  addi s0, s0, 410
  addi s0, s0, 411
  addi s0, s0, 412
  addi s0, s0, 413
  addi s0, s0, 414
  addi s0, s0, 415
  addi s0, s0, 416
  addi s0, s0, 417
  addi s0, s0, 418
  addi s0, s0, 419
  addi s0, s0, 420
  addi s0, s0, 421
  addi s0, s0, 422
  addi s0, s0, 423
  addi s0, s0, 424
  addi s0, s0, 425
  addi s0, s0, 426
  addi s0, s0, 427
  addi s0, s0, 428
  addi s0, s0, 429
  addi s0, s0, 430
  addi s0, s0, 431
  addi s0, s0, 432
  addi s0, s0, 433
  addi s0, s0, 434
  addi s0, s0, 435
  addi s0, s0, 436
  addi s0, s0, 437
  addi s0, s0, 438
  addi s0, s0, 439
  addi s0, s0, 440
  addi s0, s0, 441
  addi s0, s0, 442
  addi s0, s0, 443
  addi s0, s0, 444
  addi s0, s0, 445
  addi s0, s0, 446
  addi s0, s0, 447
  addi s0, s0, 448
  addi s0, s0, 449
  addi s0, s0, 450
  addi s0, s0, 451
  addi s0, s0, 452
  addi s0, s0, 453
  addi s0, s0, 454
  addi s0, s0, 455
  addi s0, s0, 456
  addi s0, s0, 457
  addi s0, s0, 458
  addi s0, s0, 459
  addi s0, s0, 460
  addi s0, s0, 461
  addi s0, s0, 462
  addi s0, s0, 463
  addi s0, s0, 464
  addi s0, s0, 465
  addi s0, s0, 466
  addi s0, s0, 467
  addi s0, s0, 468
  addi s0, s0, 469
  addi s0, s0, 470
  addi s0, s0, 471
  addi s0, s0, 472
  addi s0, s0, 473
  addi s0, s0, 474
  addi s0, s0, 475
  addi s0, s0, 476
  addi s0, s0, 477
  addi s0, s0, 478
  addi s0, s0, 479
  addi s0, s0, 480
  addi s0, s0, 481
  addi s0, s0, 482
  addi s0, s0, 483
  addi s0, s0, 484
  addi s0, s0, 485
  addi s0, s0, 486
  addi s0, s0, 487
  addi s0, s0, 488
  addi s0, s0, 489
  addi s0, s0, 490
  addi s0, s0, 491
  addi s0, s0, 492
  addi s0, s0, 493
  addi s0, s0, 494
  addi s0, s0, 495
  addi s0, s0, 496
  addi s0, s0, 497
  addi s0, s0, 498
  addi s0, s0, 499
  addi s0, s0, 500
  addi s0, s0, 501
  addi s0, s0, 502
  addi s0, s0, 503
  addi s0, s0, 504
  addi s0, s0, 505
  addi s0, s0, 506
  addi s0, s0, 507
  addi s0, s0, 508
  addi s0, s0, 509
  addi s0, s0, 510
  addi s0, s0, 511
  j check_result

.org (4096*2)
check_result:
  li t0, 130816 // ANSWER
  bne t0, s0, fail

pass:
  bsg_asm_finish(IO_X_INDEX, 0)
pass_loop:
  j pass_loop
fail:
  bsg_asm_print_reg(IO_X_INDEX, s0)
  bsg_asm_fail(IO_X_INDEX, 0)
fail_loop:
  j fail_loop
